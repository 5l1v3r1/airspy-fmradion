無線とラジオの人生(8): FM放送とエアチェック(3): MacでFM受信を極めるために

8歳のころから45年以上無線とラジオと共に歩んできた。今回もFM放送とエアチェックの話をする。前回からもう半年以上が経過してしまった。

## 前回までの記事

第1回目 <https://note.mu/jj1bdx/n/n15dca14376a4> ではFM放送との馴初めの話をした。

第2回目 <https://note.mu/jj1bdx/n/nb5771be759cb> ではなぜFM放送をソフトウェア無線機(SDR)で受信するのか、という話をした。

今回は前回に引き続いて、Macの上でSDRをどう作っていくか、そしてどう実装していくかについて書く。

## SDRの名前と公開場所

作業しているSDRの名前は[airspy-fmradion](https://github.com/jj1bdx/airspy-fmradion)という。[Airspy](https://airspy.com/)で動くFMラジオ、というつもりで名前を付けた。radionと、最後にnがついているのは、スウェーデン語の定形(bestämd form、英語の定冠詞をつけた形と同義)のつもりである。

## 受信機改良の道程(1): FIRフィルタ

前回の2019年1月初めから8月中旬までの時間をかけて何をやっていたか。一言でいえばフィルタの改良と、アルゴリズムの高速化である。

FM放送を受信するためには、いろいろな周波数の電波を選り分けて、目的の信号を取り出す必要がある。そのためにはフィルタが必要になる。良いフィルタとは、希望する信号のみを取り出せるように、希望しない信号（妨害信号）を最大限排除する能力を持っているフィルタのことをいう。

![](airspy-fmradion-vs-ST-S7A-filter.png)

上に示したのは、私が1984年から1990年代半ばまで使っていた従来のFMチューナ（テクニクスST-S7A）のIF（中間周波数、SDRソフトウェアにとっては入力にあたる）用フィルタの仕様書を独自に再現した特性と、2019年3月ごろに実装していたairspy-fmradionのIF用FIRフィルタの計算上の特性である。「再現した」と但し書きをつけたのは、現物を測定することは不可能であったこと、そしてアナログの（おそらくセラミックの）フィルタであったため、IIRフィルタ（アナログでいえばバターワースフィルタ）とみなして再現したからである。表示には[Iowa Hills Software](http://www.iowahills.com/)のデザインツールを使った。

一見してわかるのはスカート特性の違いである。従来のFMチューナのフィルタは広がっていく形なのに対し、airspy-fmradionのフィルタはむしろ絞っていく形になっている。これは通過域をできるだけ広く取りつつ、不要な帯域を排除する設計にしたからである。混信妨害排除という意味では、現代のFIRフィルタの方がより適していることがわかる。

そしてAF（音声、オーディオ）フィルタにも鋭い特性のものが必要になる。FM放送の再生保証帯域は15kHzまでだが、19kHzには変調度10%のステレオ用のパイロット信号が控えているため、19kHzをカットせずにそのまま再生してしまうと耳やスピーカーを痛めかねない。そのため、15kHzまではなるべく平坦に再生するが、19kHzは確実に遮断するフィルタを使うことになる。幸い、FIRフィルタを使えばそのようなフィルタを設計することは難しくはない。










#音楽
#ラジオ
#とは
#技術
#無線
#FMラジオ
#無線とラジオの人生
#エアチェック
#FM放送


